<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record model="ir.module.category" id="module_helpdesk_category">
      <field name="name">Helpdesk</field>
      <field name="description">Helps you handle your helpdesk security.</field>
      <field name="sequence">9</field>
    </record>
  </data>
  <data noupdate="0">
    <!--Email template -->
<!--     
 --><!--       ${object.user_id.partner_id.id if object.user_id else ','.join(map(lambda x: str(x.partner_id.id),object.user_ids ) }
 -->

<!---->     <record id="assignment_email_template" model="mail.template">
      <field name="name">New ticket</field>
      <field name="model_id" ref="model_helpdesk_ticket"/>
      <field name="email_from">${object.company_id.partner_id.email}</field>
      <field name="subject"> New ticket ${object.number} </field>
  <field name="partner_to">${object.user_id.partner_id.id if object.user_id else ','.join(map(str,object.user_ids_partner_ids.ids))  }   
      </field>
      <field name="auto_delete" eval="False"/>
      <field name="lang">${object.partner_id.lang}</field>
      <field name="body_html" type="xml">
        <p>Hello ${object.user_id and object.user_id.name or object.team_id.name},</p>
        <p>The ticket ${object.number} with subject ${object.name}  has been assigned to you.</p>
      </field>
    </record>

    <record id="closed_email_template" model="mail.template">
      <field name="name">Ticket Closed</field>
      <field name="model_id" ref="model_helpdesk_ticket"/>
      <field name="email_from">${object.company_id.partner_id.email}</field>
      <field name="subject">Ticket ${object.number } solved   </field>
      <field name="partner_to">${object.partner_id and object.partner_id.id or ''}</field>
      <field name="auto_delete" eval="False"/>
      <field name="lang">${object.partner_id.lang}</field>
      <field name="body_html" type="xml">
      
        <p>Hello ${object.partner_id.name},</p>
        <p>The ticket ${object.number} with text "${object.name }" has been closed with result.</p>
        <p>${object.closed_description and object.closed_description or ''}</p> 
      </field>
    </record>
     <!-- Sequence -->
    <record id="helpdesk_ticket_sequence" model="ir.sequence">
      <field name="name">Helpdesk Ticket Sequence</field>
      <field name="code">helpdesk.ticket.sequence</field>
      <field name="prefix">HT</field>
      <field name="padding">5</field>
      <field name="company_id"/>
    </record>
    <!-- Stages -->
    <record id="helpdesk_ticket_stage_new" model="helpdesk.ticket.stage">
      <field name="sequence">1</field>
      <field name="name">New</field>
      <field name="unattended">True</field>
      <field name="closed">False</field>
      <field name="company_id"/>
    </record>
    <record id="helpdesk_ticket_stage_in_progress" model="helpdesk.ticket.stage">
      <field name="sequence">2</field>
      <field name="name">In Progress</field>
      <field name="unattended">False</field>
      <field name="closed">False</field>
      <field name="company_id"/>
    </record>
    <record id="helpdesk_ticket_stage_awaiting" model="helpdesk.ticket.stage">
      <field name="sequence">3</field>
      <field name="name">Awaiting</field>
      <field name="unattended">False</field>
      <field name="closed">False</field>
      <field name="company_id"/>
    </record>
    <record id="helpdesk_ticket_stage_done" model="helpdesk.ticket.stage">
      <field name="sequence">3</field>
      <field name="name">Done</field>
      <field name="unattended">False</field>
      <field name="closed">True</field>
      <field name="fold">True</field>
      <field name="company_id"/>
    </record>
    <record id="helpdesk_ticket_stage_cancelled" model="helpdesk.ticket.stage">
      <field name="sequence">4</field>
      <field name="name">Cancelled</field>
      <field name="unattended">False</field>
      <field name="closed">True</field>
      <field name="fold">True</field>
      <field name="company_id"/>
    </record>
    <!-- Channels -->
    <record id="helpdesk_ticket_channel_web" model="helpdesk.ticket.channel">
      <field name="name">Web</field>
    </record>
    <record id="helpdesk_ticket_channel_email" model="helpdesk.ticket.channel">
      <field name="name">Email</field>
    </record>
    <record id="helpdesk_ticket_channel_phone" model="helpdesk.ticket.channel">
      <field name="name">Phone</field>
    </record>
    <record id="helpdesk_ticket_channel_other" model="helpdesk.ticket.channel">
      <field name="name">Other</field>
    </record>
  </data>
</odoo>

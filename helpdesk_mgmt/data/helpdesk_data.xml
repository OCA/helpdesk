<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record model="ir.module.category" id="module_helpdesk_category">
            <field name="name">Helpdesk</field>
            <field name="description">Helps you handle your helpdesk security.</field>
            <field name="sequence">9</field>
        </record>
    </data>
    <data noupdate="1">
        <!--Email template -->
        <record id="assignment_email_template" model="mail.template">
            <field name="name">Helpdesk Ticket Assignment</field>
            <field name="model_id" ref="model_helpdesk_ticket" />
            <field name="email_from">${object.company_id.partner_id.email}</field>
            <field
                name="subject"
            >${object.company_id.name} Ticket Assignment (${object.number or 'n/a' })</field>
            <field name="partner_to">${object.user_id.partner_id.id}</field>
            <field name="auto_delete" eval="False" />
            <field name="lang">${object.user_id.partner_id.lang}</field>
            <field name="body_html" type="xml">
<div>
                <p>Hello ${object.user_id.name},</p>
                <p>The ticket ${object.number} has been assigned to you.</p>
                <p />
                <table
                        border="0"
                        cellpadding="0"
                        cellspacing="0"
                        style="margin-top: 10px;background-color: #F1F1F1; font-family:Verdana, Arial,sans-serif; color: #454748; width: 100%; border-collapse:separate;"
                    >
                    <tr>
                        <td colspan="2">
                            <table border="0" cellpadding="0">
                                <tr>
                                    <td
                                            style="padding-right: 10px;text-align:right;font-weight: bold;"
                                        >Partner:</td>
                                    <td>${object.partner_id.name}</td>
                                </tr>
                                <tr>
                                    <td
                                            style="padding-right: 10px;text-align:right;font-weight: bold;"
                                        >Priority:</td>
                                    <td>${object.priority}</td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr><td colspan="2"><h3>${object.name}</h3></td></tr>
                    <tr><td colspan="2">${object.description|safe}</td></tr>
                </table>
</div>
             </field>
        </record>
        <record id="new_ticket_template" model="mail.template">
            <field name="name">Helpdesk New Ticket Notification Email</field>
            <field name="model_id" ref="helpdesk_mgmt.model_helpdesk_ticket" />
            <field name="email_from">${object.company_id.partner_id.email}</field>
            <field
                name="email_cc"
            >${not object.partner_id and object.partner_email or ''|safe},</field>
            <field name="subject">Ticket ${object.number}: ${object.name}</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="auto_delete" eval="False" />
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html" type="xml">
<div>
                <p>Hello ${object.partner_id.name},</p>
                <p>Thank you for reaching out to us. We are working on your request
                    and will get back to you soon. Your request has been assigned
                    ticket number ${object.number}. You can use it to track your
                    request and as a reference in future communications.</p>
</div>
                </field>
        </record>
        <record id="closed_ticket_template" model="mail.template">
            <field name="name">Helpdesk Closed Ticket Notification Email</field>
            <field name="model_id" ref="helpdesk_mgmt.model_helpdesk_ticket" />
            <field name="email_from">${object.company_id.partner_id.email}</field>
            <field
                name="email_cc"
            >${not object.partner_id and object.partner_email or ''|safe},</field>
            <field name="subject">Ticket ${object.number} has been closed.</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="auto_delete" eval="False" />
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html" type="xml">
<div>
                <p>Hello ${object.partner_id.name},</p>
                <p>Your request (${object.number}) has been resolved. We are closing
                    the ticket now. If you believe this is in error or if your
                    request has not been resolved please reply to this email. If
                    there is anything else we can help you with please open a new
                    ticket.</p>
                <br />
                <p>Thank you for reaching out to us.</p>
</div>
            </field>
        </record>
        <record id="changed_stage_template" model="mail.template">
            <field name="name">Helpdesk Changed Stage notification Email</field>
            <field name="model_id" ref="helpdesk_mgmt.model_helpdesk_ticket" />
            <field name="email_from">${object.company_id.partner_id.email}</field>
            <field
                name="subject"
            >Ticket ${object.number}: stage change notification</field>
            <field name="partner_to">${object.user_id.partner_id.id}</field>
            <field name="auto_delete" eval="False" />
            <field name="lang">${object.user_id.partner_id.lang}</field>
            <field name="body_html" type="xml">
<div>
                <p>Hello ${object.user_id.name},</p>
                <p>There has been a change to ticket ${object.number}.</p>
                <p />
                <h3>${object.name}</h3>
                <table
                        border="0"
                        cellpadding="0"
                        cellspacing="0"
                        style="margin-top: 10px;background-color: #F1F1F1; font-family:Verdana, Arial,sans-serif; color: #454748; width: 100%; border-collapse:separate;"
                    >
                    <td colspan="2">
                        <table border="0" cellpadding="0">
                            <tr>
                                <td
                                        style="padding-right: 10px;text-align:right;font-weight: bold;"
                                    >Partner:</td>
                                <td>${object.partner_id.name}</td>
                            </tr>
                            <tr>
                                <td
                                        style="padding-right: 10px;text-align:right;font-weight: bold;"
                                    >Priority:</td>
                                <td>${object.priority}</td>
                            </tr>
                        </table>
                    </td>
                <tr><td colspan="2">New stage: ${object.stage_id.name}</td></tr>
                </table>
</div>
            </field>
        </record>
        <!-- Sequence -->
        <record id="helpdesk_ticket_sequence" model="ir.sequence">
            <field name="name">Helpdesk Ticket Sequence</field>
            <field name="code">helpdesk.ticket.sequence</field>
            <field name="prefix">HT</field>
            <field name="padding">5</field>
            <field name="company_id" />
        </record>
        <!-- Stages -->
        <record id="helpdesk_ticket_stage_new" model="helpdesk.ticket.stage">
            <field name="sequence">1</field>
            <field name="name">New</field>
            <field name="unattended">True</field>
            <field name="closed">False</field>
            <field name="company_id" />
        </record>
        <record id="helpdesk_ticket_stage_in_progress" model="helpdesk.ticket.stage">
            <field name="sequence">2</field>
            <field name="name">In Progress</field>
            <field name="unattended">False</field>
            <field name="closed">False</field>
            <field name="company_id" />
        </record>
        <record id="helpdesk_ticket_stage_awaiting" model="helpdesk.ticket.stage">
            <field name="sequence">3</field>
            <field name="name">Awaiting</field>
            <field name="unattended">False</field>
            <field name="closed">False</field>
            <field name="company_id" />
        </record>
        <record id="helpdesk_ticket_stage_done" model="helpdesk.ticket.stage">
            <field name="sequence">4</field>
            <field name="name">Done</field>
            <field name="unattended">False</field>
            <field name="closed">True</field>
            <field name="fold">True</field>
            <field name="mail_template_id" ref="helpdesk_mgmt.closed_ticket_template" />
            <field name="company_id" />
        </record>
        <record id="helpdesk_ticket_stage_cancelled" model="helpdesk.ticket.stage">
            <field name="sequence">5</field>
            <field name="name">Cancelled</field>
            <field name="unattended">False</field>
            <field name="closed">True</field>
            <field name="fold">True</field>
            <field name="mail_template_id" ref="helpdesk_mgmt.closed_ticket_template" />
            <field name="company_id" />
        </record>
        <!-- Channels -->
        <record id="helpdesk_ticket_channel_web" model="helpdesk.ticket.channel">
            <field name="name">Web</field>
        </record>
        <record id="helpdesk_ticket_channel_email" model="helpdesk.ticket.channel">
            <field name="name">Email</field>
        </record>
        <record id="helpdesk_ticket_channel_phone" model="helpdesk.ticket.channel">
            <field name="name">Phone</field>
        </record>
        <record id="helpdesk_ticket_channel_other" model="helpdesk.ticket.channel">
            <field name="name">Other</field>
        </record>
        <!--default alias for leads-->
        <record id="mail_alias_lead_info_helpdesk" model="mail.alias">
            <field name="alias_name">help</field>
            <field name="alias_model_id" ref="model_helpdesk_ticket" />
            <field name="alias_user_id" ref="base.user_admin" />
            <field name="alias_parent_model_id" ref="model_helpdesk_ticket_team" />
        </record>
    </data>
</odoo>

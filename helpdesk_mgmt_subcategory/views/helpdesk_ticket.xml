<odoo>

  <record id="helpdesk_ticket_view_search" model="ir.ui.view">
    <field name="model">helpdesk.ticket</field>
    <field name="inherit_id" ref="helpdesk_mgmt.helpdesk_ticket_view_search" />
    <field name="arch" type="xml">
      <search>
        <field name="category_id" filter_domain="[('category_id','child_of', self)]" />
      </search>
      <group>
        <filter
                    string="Category"
                    name="group_category"
                    context="{'group_by':'category_id'}"
                />
      </group>
    </field>
  </record>

  <record id="ticket_view_tree" model="ir.ui.view">
    <field name="model">helpdesk.ticket</field>
    <field name="inherit_id" ref="helpdesk_mgmt.ticket_view_tree" />
    <field name="arch" type="xml">
      <tree position="attributes">
        <attribute name="multi_edit">1</attribute>
      </tree>
      <field name="number" position="after">
        <field name="team_id" />
        <field name="category_id" optional="hide" />
      </field>
    </field>
  </record>

  <!-- -->
  <record id="ticket_view_form" model="ir.ui.view">
    <field name="model">helpdesk.ticket</field>
    <field name="inherit_id" ref="helpdesk_mgmt.ticket_view_form" />
    <field name="arch" type="xml">
      <field name="category_id" position="before">
        <field name="root_category_id" invisible="1" />
      </field>
      <field name="category_id" position="attributes">
        <attribute name="options">{'no_create':True, 'no_create_edit': True}</attribute>
        <attribute name="domain">[('id','child_of', root_category_id)]</attribute>
      </field>
    </field>
  </record>
</odoo>
